(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8479:(e,t,a)=>{Promise.resolve().then(a.bind(a,8973))},8973:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ed});var s=a(2311);let r=(0,a(6207).v)(e=>({employees:[],setEmployees:t=>e({employees:t}),updateEmployee:(t,a)=>e(e=>({employees:e.employees.map(e=>e.id===t?{...e,...a}:e)}))}));var n=a(2847),i=a(7614),o=a(5641),d=a(2560),l=a(7246),c=a(8327);function u(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,c.QP)((0,l.$)(t))}let x=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function m(e){let{className:t,variant:a,size:r,asChild:n=!1,...i}=e,d=n?o.bL:"button";return(0,s.jsx)(d,{"data-slot":"button",className:u(x({variant:a,size:r,className:t})),...i})}var g=a(2486),h=a(9508);function f(e){let{...t}=e;return(0,s.jsx)(g.bL,{"data-slot":"dialog",...t})}function v(e){let{...t}=e;return(0,s.jsx)(g.l9,{"data-slot":"dialog-trigger",...t})}function p(e){let{...t}=e;return(0,s.jsx)(g.ZL,{"data-slot":"dialog-portal",...t})}function b(e){let{...t}=e;return(0,s.jsx)(g.bm,{"data-slot":"dialog-close",...t})}function j(e){let{className:t,...a}=e;return(0,s.jsx)(g.hJ,{"data-slot":"dialog-overlay",className:u("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function w(e){let{className:t,children:a,showCloseButton:r=!0,...n}=e;return(0,s.jsxs)(p,{"data-slot":"dialog-portal",children:[(0,s.jsx)(j,{}),(0,s.jsxs)(g.UC,{"data-slot":"dialog-content",className:u("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[a,r&&(0,s.jsxs)(g.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(h.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function y(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-footer",className:u("flex flex-col gap-2 sm:flex-row",t),...a})}function N(e){let{className:t,...a}=e;return(0,s.jsx)(g.hE,{"data-slot":"dialog-title",className:u("text-lg leading-none font-semibold",t),...a})}var k=a(1298);function z(e){let{...t}=e;return(0,s.jsx)(k._s.Root,{"data-slot":"drawer",...t})}function C(e){let{...t}=e;return(0,s.jsx)(k._s.Trigger,{"data-slot":"drawer-trigger",...t})}function S(e){let{...t}=e;return(0,s.jsx)(k._s.Portal,{"data-slot":"drawer-portal",...t})}function A(e){let{...t}=e;return(0,s.jsx)(k._s.Close,{"data-slot":"drawer-close",...t})}function P(e){let{className:t,...a}=e;return(0,s.jsx)(k._s.Overlay,{"data-slot":"drawer-overlay",className:u("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function _(e){let{className:t,children:a,...r}=e;return(0,s.jsxs)(S,{"data-slot":"drawer-portal",children:[(0,s.jsx)(P,{}),(0,s.jsxs)(k._s.Content,{"data-slot":"drawer-content",className:u("group/drawer-content bg-background fixed z-50 flex h-auto flex-col","data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg data-[vaul-drawer-direction=top]:border-b","data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg data-[vaul-drawer-direction=bottom]:border-t","data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:border-l data-[vaul-drawer-direction=right]:sm:max-w-sm","data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:border-r data-[vaul-drawer-direction=left]:sm:max-w-sm",t),...r,children:[(0,s.jsx)("div",{className:"bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block"}),a]})]})}function E(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"drawer-header",className:u("flex flex-col gap-0.5 p-4 group-data-[vaul-drawer-direction=bottom]/drawer-content:text-center group-data-[vaul-drawer-direction=top]/drawer-content:text-center md:gap-1.5 md:text-left",t),...a})}function O(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"drawer-footer",className:u("mt-auto flex flex-col gap-2 p-4",t),...a})}function L(e){let{className:t,...a}=e;return(0,s.jsx)(k._s.Title,{"data-slot":"drawer-title",className:u("text-foreground font-semibold",t),...a})}function U(e){let{className:t,type:a,...r}=e;return(0,s.jsx)("input",{type:a,"data-slot":"input",className:u("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...r})}var R=a(6496);function B(e){let{className:t,...a}=e;return(0,s.jsx)(R.b,{"data-slot":"label",className:u("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}var F=a(7481);function D(e){let{className:t,...a}=e;return(0,s.jsx)(F.bL,{"data-slot":"switch",className:u("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:(0,s.jsx)(F.zi,{"data-slot":"switch-thumb",className:u("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function I(e){let{name:t,setName:a,email:r,setEmail:n,isActive:i,setIsActive:o}=e;return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(B,{className:"flex-1",htmlFor:"",children:"Name"}),(0,s.jsx)(U,{className:"flex-3",placeholder:"Enter name",value:t,onChange:e=>a(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(B,{className:"flex-1",htmlFor:"",children:"Email"}),(0,s.jsx)(U,{className:"flex-3",placeholder:"Enter email",value:r,onChange:e=>n(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(B,{className:"flex-1",htmlFor:"",children:"Status"}),(0,s.jsx)("div",{className:"flex-3",children:(0,s.jsx)(D,{checked:i,onCheckedChange:o})})]})]})}function M(e){let{employee:t}=e,[a,o]=(0,n.useState)(t.name),[d,l]=(0,n.useState)(t.email),[c,u]=(0,n.useState)(t.isActive),[x,g]=(0,n.useState)(!1),h=r(e=>e.updateEmployee),p=function(){let[e,t]=(0,n.useState)(void 0);return(0,n.useEffect)(()=>{let e=window.matchMedia("(max-width: ".concat(767,"px)")),a=()=>{t(window.innerWidth<768)};return e.addEventListener("change",a),t(window.innerWidth<768),()=>e.removeEventListener("change",a)},[]),!!e}(),j=()=>{h(t.id,{name:a,email:d,isActive:c}),g(!1),i.o.success("Employee updated successfully",{position:p?"top-center":"bottom-right"})};return p?(0,s.jsxs)(z,{open:x,onOpenChange:g,children:[(0,s.jsx)(C,{asChild:!0,children:(0,s.jsx)(m,{variant:"outline",children:"Update"})}),(0,s.jsxs)(_,{children:[(0,s.jsx)(E,{className:"text-left",children:(0,s.jsx)(L,{children:"Update Employee"})}),(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)(I,{name:a,setName:o,email:d,setEmail:l,isActive:c,setIsActive:u})}),(0,s.jsxs)(O,{className:"pt-2",children:[(0,s.jsx)(m,{variant:"outline",onClick:j,children:"Save"}),(0,s.jsx)(A,{asChild:!0,children:(0,s.jsx)(m,{variant:"destructive",children:"Cancel"})})]})]})]}):(0,s.jsxs)(f,{open:x,onOpenChange:g,children:[(0,s.jsx)(v,{asChild:!0,children:(0,s.jsx)(m,{variant:"outline",size:"sm",children:"Update"})}),(0,s.jsxs)(w,{children:[(0,s.jsx)(N,{children:"Update Employee"}),(0,s.jsx)(I,{name:a,setName:o,email:d,setEmail:l,isActive:c,setIsActive:u}),(0,s.jsxs)(y,{className:"flex justify-between",children:[(0,s.jsx)(b,{asChild:!0,children:(0,s.jsx)(m,{variant:"destructive",onClick:()=>{o(t.name),l(t.email),u(t.isActive),g(!1)},children:"Cancel"})}),(0,s.jsx)(m,{variant:"outline",onClick:j,children:"Save"})]})]})]})}var T=a(1271),V=a(3928),W=a(4225);function Z(e){let{currentPage:t,totalPages:a,hasNextPage:r,hasPreviousPage:n}=e,i=(0,W.useRouter)(),o=(0,W.useSearchParams)(),d=e=>{let t=new URLSearchParams(o.toString());t.set("page",e.toString()),i.push("/?".concat(t.toString()))};return(0,s.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsxs)("p",{className:"text-sm font-medium",children:["Page ",t," of ",a]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(m,{variant:"outline",size:"icon",onClick:()=>d(t-1),disabled:!n,children:(0,s.jsx)(T.A,{})}),(0,s.jsx)(m,{variant:"outline",size:"icon",onClick:()=>d(t+1),disabled:!r,children:(0,s.jsx)(V.A,{})})]})]})}function q(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:u("w-full caption-bottom text-sm",t),...a})})}function G(e){let{className:t,...a}=e;return(0,s.jsx)("thead",{"data-slot":"table-header",className:u("[&_tr]:border-b",t),...a})}function J(e){let{className:t,...a}=e;return(0,s.jsx)("tbody",{"data-slot":"table-body",className:u("[&_tr:last-child]:border-0",t),...a})}function K(e){let{className:t,...a}=e;return(0,s.jsx)("tr",{"data-slot":"table-row",className:u("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function Q(e){let{className:t,...a}=e;return(0,s.jsx)("th",{"data-slot":"table-head",className:u("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function Y(e){let{className:t,...a}=e;return(0,s.jsx)("td",{"data-slot":"table-cell",className:u("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}var $=a(4320),H=a(8832),X=a(5197);function ee(e){let{...t}=e;return(0,s.jsx)(X.bL,{"data-slot":"dropdown-menu",...t})}function et(e){let{...t}=e;return(0,s.jsx)(X.l9,{"data-slot":"dropdown-menu-trigger",...t})}function ea(e){let{className:t,sideOffset:a=4,...r}=e;return(0,s.jsx)(X.ZL,{children:(0,s.jsx)(X.UC,{"data-slot":"dropdown-menu-content",sideOffset:a,className:u("bg-white text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...r})})}function es(e){let{className:t,inset:a,variant:r="default",...n}=e;return(0,s.jsx)(X.q7,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":r,className:u("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}function er(e){let{initialData:t}=e,a=r(e=>e.employees),i=r(e=>e.setEmployees),o=(0,W.useSearchParams)(),d=(0,W.useRouter)();(0,n.useEffect)(()=>{i(t)},[t,i]);let l=Number(o.get("page"))||1,c=Number(o.get("size"))||20,x=o.get("sortBy")||"id",g=o.get("sortOrder")||"asc",h=o.get("filter[status]"),{data:f,pagination:v}=function(e,t,a,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"asc",n=arguments.length>5?arguments[5]:void 0,i=e;if(n){let[t,a]=n.split("=");console.log("filterKey:",t),console.log("filterValue:",a),"status"===t&&"active"===a&&(i=e.filter(e=>e.isActive)),"status"===t&&"deactivated"===a&&(i=e.filter(e=>!e.isActive))}s&&(i=[...i].sort((e,t)=>{let a=e[s],n=t[s];return null==a||null==n?0:a<n?"asc"===r?-1:1:a>n?"asc"===r?1:-1:0}));let o=i.length,d=Math.ceil(o/a),l=(t-1)*a;return{data:i.slice(l,l+a),pagination:{currentPage:t,pageSize:a,totalItems:o,totalPages:d,hasNextPage:t<d,hasPreviousPage:t>1}}}(a,l,c,x,g,h?"status=".concat(h):void 0);function p(e){let t=new URLSearchParams(o.toString());switch(e){case"active":t.set("filter[status]","active");break;case"deactivated":t.set("filter[status]","deactivated");break;default:t.set("filter[status]","")}t.set("page","1"),d.replace("?".concat(t.toString()))}return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(q,{children:[(0,s.jsx)(G,{children:(0,s.jsxs)(K,{children:[(0,s.jsx)(Q,{children:"ID"}),(0,s.jsx)(Q,{children:(0,s.jsxs)(m,{variant:"ghost",onClick:function(){let e=new URLSearchParams(o.toString());"name"!==x&&(e.set("sortBy","name"),e.set("sortOrder","asc"),d.replace("?".concat(e.toString()))),"name"===x&&"asc"===g&&(e.set("sortOrder","desc"),d.replace("?".concat(e.toString()))),"name"===x&&"desc"===g&&(e.set("sortOrder","asc"),e.set("sortBy","id"),d.replace("?".concat(e.toString())))},children:["Name ",(0,s.jsx)($.A,{className:"size-4"})]})}),(0,s.jsx)(Q,{children:"Email"}),(0,s.jsx)(Q,{children:(0,s.jsxs)(ee,{children:[(0,s.jsx)(et,{asChild:!0,children:(0,s.jsxs)(m,{variant:"ghost",children:["Status ",(0,s.jsx)(H.A,{className:"size-4"})]})}),(0,s.jsxs)(ea,{children:[(0,s.jsx)(es,{onClick:()=>p(),children:"All"}),(0,s.jsx)(es,{onClick:()=>p("active"),children:"Activated"}),(0,s.jsx)(es,{onClick:()=>p("deactivated"),children:"Deactivated"})]})]})}),(0,s.jsx)(Q,{className:"text-right",children:"Action"})]})}),(0,s.jsx)(J,{children:f.map(e=>(0,s.jsxs)(K,{children:[(0,s.jsx)(Y,{children:e.id}),(0,s.jsx)(Y,{className:"font-medium",children:e.name}),(0,s.jsx)(Y,{children:e.email}),(0,s.jsx)(Y,{className:"uppercase",align:"center",children:(0,s.jsx)("span",{className:u("text-xs font-semibold px-1 py-1 rounded",{"bg-green-200 text-green-800":e.isActive,"bg-red-200 text-red-800":!e.isActive}),children:e.isActive?"active":"deactivated"})}),(0,s.jsx)(Y,{className:"text-right",children:e.isActive&&(0,s.jsx)(M,{employee:e})})]},e.id))})]}),(0,s.jsx)(Z,{currentPage:v.currentPage,totalPages:v.totalPages,hasNextPage:v.hasNextPage,hasPreviousPage:v.hasPreviousPage})]})}var en=a(4478),ei=a(9520);function eo(){let e=(0,W.useSearchParams)(),t=(0,W.useRouter)(),[a,r]=(0,n.useState)([]),[i,o]=(0,n.useState)(!0);(0,n.useEffect)(()=>{!async function(){try{let e=await fetch("/employees.json");if(!e.ok)throw Error("Failed to load employees.json");let t=await e.json();r(t.employees)}catch(e){console.error(e)}finally{o(!1)}}()},[]);let d=void 0!==e.get("size"),l=void 0!==e.get("page"),c=void 0!==e.get("sortBy"),u=void 0!==e.get("sortOrder"),x=void 0!==e.get("filter");if(!d||!l){let a=d?e.get("size"):"20",s=l?e.get("page"):"1",r=c?e.get("sortBy"):"id",n=u?e.get("sortOrder"):"asc",i=x?e.get("filter"):"filter[status]=";t.replace("/?size=".concat(a,"&page=").concat(s,"&sortBy=").concat(r,"&sortOrder=").concat(n,"&").concat(i))}return i?(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)(en.A,{className:"animate-spin"})}):(0,s.jsxs)("div",{className:"container mx-auto p-4 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(ei.A,{className:"size-4"}),(0,s.jsx)("h1",{className:"text-xl font-bold tracking-tight",children:"AYP Group Employee Management"})]}),(0,s.jsx)(er,{initialData:a})]})}function ed(){return(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)(en.A,{className:"animate-spin"})}),children:(0,s.jsx)(eo,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[614,926,789,20,358],()=>t(8479)),_N_E=e.O()}]);